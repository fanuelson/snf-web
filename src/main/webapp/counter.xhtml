<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Insert title here</title>
</h:head>
<h:body>

	<h:form id="form" >
	<p:growl id="growl" widgetVar="growl" />
		<p:messages id="messageGrowl" widgetVar="messageGrowl"
			styleClass="display" />
		<h:outputText id="out" value="#{globalCounterView.count}"
			styleClass="ui-widget" />

		<p:commandButton value="Click" process="@this"
			action="#{globalCounterView.increment}" update="form" />
	</h:form>


	<p:socket onMessage="handleMessage"  channel="/counter2"  >
		<p:ajax event="message" listener="#{globalCounterView.teste()}"  />
	</p:socket>
	
	
	
 
<script type="text/javascript">
      function handleMessage(facesmessage) {
          facesmessage.severity = 'info';
          PF('growl').show([facesmessage]);
          PF('messageGrowl').show([facesmessage]);
      }

</script>


</h:body>
</html>